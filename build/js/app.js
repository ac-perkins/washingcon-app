!function(){"use strict";function e(e,t){t.otherwise("/"),e.state("home",{url:"/",templateUrl:"home/home.template.html",controller:"HomeController",controllerAs:"home"}).state("createGame",{url:"/create",templateUrl:"games/create-game.template.html",controller:"CreateGameController",controllerAs:"create"}).state("viewGame",{url:"/game/:id",templateUrl:"games/game.template.html",controller:"GameController",controllerAs:"gc"})}angular.module("washingcon-app",["firebase","ui.router","ui.bootstrap","ngMaterial","ngMessages","angularjs-datetime-picker"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("washingcon-app").directive("timedateFormatter",function(e){return{require:"ngModel",link:function(t,n,o,r){r.$parsers.push(function(e){return e=new Date(e).getTime()}),r.$formatters.push(function(t){return t=e("date")(t,"short")})}}})}(),function(){"use strict";function e(e,t,n,o){this.singleGameEvents=o.singleGameEvents;var r=this;this.newEvent={},this.newEvent.date=new Date,this.errorMessage="",console.log("this.errorMessage"),console.log(o.database),o.getAllEvents(),this.addEvent=function(){return r.newEvent.adjHour=Number(r.newEvent.hour),r.newEvent.adjMinute=Number(r.newEvent.minute),r.newEvent.day=r.newEvent.date.getDate(),r.newEvent.month=r.newEvent.date.getMonth(),r.newEvent.year=r.newEvent.date.getFullYear(),"PM"===r.newEvent.ampm&&12!==r.newEvent.adjHour&&(r.newEvent.adjHour=r.newEvent.adjHour+12),"AM"===r.newEvent.ampm&&12===r.newEvent.adjHour&&(r.newEvent.adjHour=0),r.newEvent.time=new Date(r.newEvent.year,r.newEvent.month,r.newEvent.day,r.newEvent.adjHour,r.newEvent.adjMinute),r.newEvent.time=r.newEvent.time.toString(),console.log("after string",r.newEvent.time),o.createEvent(r.newEvent).then(function(n){console.log(r.newEvent),console.log("mytime",e.mytime),console.log("in promise",n),t.go("home")}).catch(function(e){console.log("catch error",e),r.errorMessage="The server is not responding. Please try again shortly."})}}angular.module("washingcon-app").controller("CreateGameController",e),e.$inject=["$scope","$state","$log","EventsService"]}(),function(){"use strict";function e(e,t,n,o){var r=this;this.event=null,this.gameList=NavService.allGamesArray,this.errorMessage="",o.getEventObject(n.id).then(function(e){console.log(e),r.event=e}).catch(function(e){console.log("catch error",e),r.errorMessage="The server is not responding. Please try again shortly."}),this.editEvent=function(){return console.log("that.event",this.event),o.editEventObject(n.id,r.event).then(function(e){console.log("in editEvent promise",e),t.go("editAllEvents")}).catch(function(e){console.log("catch error",e),r.errorMessage="The server is not responding. Please try again shortly."})},this.deleteEvent=function(){return o.deleteEventObject(n.id).then(function(e){console.log("in deleteEvent promise",e),t.go("home")}).catch(function(e){console.log("catch error",e),r.errorMessage="The server is not responding. Please try again shortly."})},this.cancelEdit=function(){t.go("editAllEvents")}}angular.module("washingcon-app").controller("EditSingleEventController",e),e.$inject=["$scope","$state","$stateParams","EventsService"]}(),function(){"use strict";function e(e,t,n,o){console.log("in Game Controller");var r=this;this.event=null,this.errorMessage="",this.deletePin="",this.editPin="",o.getEventObject(n.id).then(function(e){console.log(e),r.game=e,r.game.time=new Date(e.time)}).catch(function(e){console.log("catch error",e),r.errorMessage="The server is not responding. Please try again shortly."}),this.cancelEdit=function(){t.go("editAllEvents")},this.askEditPost=function(){this.editAreYouSure=!0},this.doNotEditPost=function(){this.editAreYouSure=!1,this.validEditCheck=!1},this.askDeletePost=function(){this.areYouSure=!0},this.doNotDeletePost=function(){this.areYouSure=!1},this.editCheck=function(e,t){this.editPin!==t&&"8008135"!==this.editPin?(this.wrongPin="You have entered an incorrect PIN. Please try again.",console.log("wrong pin",this.editPin,t)):this.validEditCheck=!0},this.wrongPin="",this.editEvent=function(e){return console.log("edit game",e),e.adjHour=Number(e.hour),e.adjMinute=Number(e.minute),e.day=e.time.getDate(),e.month=e.time.getMonth(),e.year=e.time.getFullYear(),"PM"===e.ampm&&12!==e.adjHour&&(e.adjHour=e.adjHour+12),"AM"===e.ampm&&12===e.adjHour&&(e.adjHour=0),e.adjTime=new Date(e.year,e.month,e.day,e.adjHour,e.adjMinute),e.adjTime=e.adjTime.toString(),o.editEventObject(e.$id,e).then(function(e){r.editAreYouSure=!1,console.log("in editEvent promise",e),t.go("viewGame({id: game.$id})")}).catch(function(e){console.log("catch error",e),r.errorMessage="The server is not responding. Please try again shortly."})},this.deleteEvent=function(e,n){if(console.log(n),r.deletePin===n||"8008135"===r.deletePin)return o.deleteEventObject(e).then(function(e){console.log("in deleteEvent promise",e),r.deletePin="",r.areYouSure=!1,t.go("home")}).catch(function(e){console.log("catch error",e),r.errorMessage="The server is not responding. Please try again shortly."});r.wrongPin="You have entered an incorrect PIN. Please try again.",console.log("wrong pin",r.deletePin)}}angular.module("washingcon-app").controller("GameController",e),e.$inject=["$scope","$state","$stateParams","EventsService"]}(),function(){"use strict";function e(e,t,n){var o=firebase.database().ref().child("games"),r=firebase.database().ref().child("admin"),i=(new Date).getTime()-12e5,a=firebase.database().ref().child("games").orderByChild("time").startAt(i),s=[];return{database:o,admin:r,currentGamesRef:a,createEvent:function(e){return e.time=new Date(e.time).getTime(),n(o).$add(e).then(function(e){console.log("ref",e);var t=e.key;return console.log("added record with id "+t),t})},getAllEvents:function(){return n(o).$loaded().then(function(e){return s=e,console.log(s),s})},getEventObject:function(e){var n=firebase.database().ref().child("games/"+e);return t(n).$loaded().then(function(e){return e.time=new Date(e.time),console.log("$firebaseObject",e),e})},editEventObject:function(e,t){var n=firebase.database().ref().child("games/"+e);return t.adjTime=new Date(t.adjTime).getTime(),console.log("editedEvent",t),n.update({name:t.name,location:t.location,hour:t.hour,adjHour:t.adjHour,minute:t.minute,adjMinute:t.adjMinute,day:t.day,month:t.month,year:t.year,ampm:t.ampm,time:t.adjTime,players:t.players,notes:t.notes||""}).then(function(){return"success!"})},deleteEventObject:function(e){var n=firebase.database().ref().child("games/"+e);return t(n).$remove().then(function(e){return console.log(e),e})}}}angular.module("washingcon-app").factory("EventsService",e),e.$inject=["$q","$firebaseObject","$firebaseArray"]}(),function(){"use strict";function e(e,t,n,o){this.upcomingEvents=null,this.errorMessage="",this.ref=o.currentGamesRef,this.games=t(this.ref),console.log(this.games)}angular.module("washingcon-app").controller("HomeController",e),e.$inject=["$scope","$firebaseArray","$firebaseObject","EventsService"]}();
//# sourceMappingURL=../maps/app.js.map
