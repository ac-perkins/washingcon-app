{"version":3,"sources":["app.module.js","directives/timedate-formatter.directive.js","games/create-game.controller.js","games/edit-game.controller.js","games/game.controller.js","games/games.service.js","home/home.controller.js"],"names":["appConfig","$stateProvider","$urlRouterProvider","otherwise","state","url","templateUrl","controller","controllerAs","angular","module","config","$inject","directive","$filter","require","link","scope","element","attrs","ngModelController","$parsers","push","data","Date","getTime","$formatters","CreateGameController","$scope","$state","$log","EventsService","this","singleGameEvents","that","newEvent","daySelect","now","getHours","hour","JSON","stringify","ampm","minute","Math","floor","getMinutes","date","errorMessage","getAllEvents","selectDay","addEvent","adjHour","Number","adjMinute","day","getDate","month","getMonth","year","getFullYear","time","toString","console","log","createEvent","then","ref","mytime","go","catch","err","inputListener","$","focus","attr","blur","EditSingleEventController","$stateParams","event","gameList","NavService","allGamesArray","getEventObject","id","eventObj","editEvent","editEventObject","deleteEvent","deleteEventObject","cancelEdit","GameController","deletePin","editPin","game","askEditPost","editAreYouSure","doNotEditPost","validEditCheck","askDeletePost","areYouSure","doNotDeletePost","editCheck","gameId","pin","wrongPin","adjTime","$id","$q","$firebaseObject","$firebaseArray","database","firebase","child","admin","timeWindow","currentGamesRef","orderByChild","startAt","allEvents","newGame","$add","key","$loaded","x","eventId","gameObj","obj","editedEvent","update","name","location","players","notes","$remove","factory","HomeController","upcomingEvents","games"],"mappings":"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","file":"../src/app.js","sourcesContent":["(function() {\n    'use strict';\n\n  angular\n    .module('washingcon-app',['firebase', 'ui.router', 'ui.bootstrap', 'ngMaterial', 'ngMessages', 'angularjs-datetime-picker'])\n    .config(appConfig);\n\n  appConfig.$inject = ['$stateProvider', '$urlRouterProvider'];\n\n  function appConfig($stateProvider, $urlRouterProvider) {\n\n    $urlRouterProvider.otherwise('/');\n\n    $stateProvider\n    .state('home', {\n      url: '/',\n      templateUrl: 'home/home.template.html',\n      controller: 'HomeController',\n      controllerAs: 'home'\n    })\n    // .state('events', {\n    //   url: '/events/:id',\n    //   templateUrl: 'events/events.template.html',\n    //   controller: 'EventsController',\n    //   controllerAs: 'events'\n    // })\n    .state('createGame', {\n      url: '/create',\n      templateUrl: 'games/create-game.template.html',\n      controller: 'CreateGameController',\n      controllerAs: 'create'\n    })\n    .state('viewGame', {\n      url: '/game/:id',\n      templateUrl: 'games/game.template.html',\n      controller: 'GameController',\n      controllerAs: 'gc'\n    });\n    // .state('editAllEvents', {\n    //   url: '/event/edit',\n    //   templateUrl: 'events/edit-all-events.template.html',\n    //   controller: 'EditEventController',\n    //   controllerAs: 'edit'\n    // });\n\n  }\n\n})();\n","(function() {\n    'use strict';\n\n    angular\n      .module('washingcon-app')\n      .directive('timedateFormatter', function($filter) {\n        return {\n          require: 'ngModel',\n          link: function(scope, element, attrs, ngModelController) {\n            ngModelController.$parsers.push(function(data) {\n              //convert data from view format to model format\n              data = new Date(data).getTime();\n              // $filter('date')(data, \"short\");\n              return data; //converted\n            });\n\n            ngModelController.$formatters.push(function(data) {\n              //convert data from model format to view format\n              data = $filter('date')(data, \"short\");\n              // data = new Date(data).getTime();\n              return data; //converted\n            });\n          }\n        };\n      });\n\n})();\n","(function() {\n    'use strict';\n\n    angular\n      .module('washingcon-app')\n      .controller('CreateGameController', CreateGameController);\n\n    CreateGameController.$inject = ['$scope', '$state', '$log', 'EventsService'];\n    function CreateGameController($scope, $state, $log, EventsService) {\n\n      this.singleGameEvents = EventsService.singleGameEvents;\n      var that = this;\n      this.newEvent = {daySelect: '2017, 9, 9'};\n      this.now = new Date(Date.now());\n      if (this.now.getHours() > 12) {\n        this.newEvent.hour = JSON.stringify(this.now.getHours() - 12);\n        this.newEvent.ampm = 'PM';\n      } else {\n        this.newEvent.hour = JSON.stringify(this.now.getHours());\n        this.newEvent.ampm = 'AM';\n      }\n      this.newEvent.minute = JSON.stringify(Math.floor(this.now.getMinutes()/15)*15);\n      this.newEvent.date = new Date(this.newEvent.daySelect);\n      this.errorMessage = '';\n      EventsService.getAllEvents();\n\n      this.selectDay = function selectDay() {\n        var that = this;\n        that.newEvent.date = new Date(this.newEvent.daySelect);\n      };\n\n      this.addEvent = function addEvent() {\n        // that.newEvent.time = that.newEvent.time.toString();\n        that.newEvent.adjHour = Number(that.newEvent.hour);\n        that.newEvent.adjMinute = Number(that.newEvent.minute);\n        that.newEvent.day = that.newEvent.date.getDate();\n        that.newEvent.month = that.newEvent.date.getMonth();\n        that.newEvent.year = that.newEvent.date.getFullYear();\n        if (that.newEvent.ampm === 'PM' && that.newEvent.adjHour !== 12) {\n          that.newEvent.adjHour = that.newEvent.adjHour + 12;\n        }\n        if (that.newEvent.ampm === 'AM' && that.newEvent.adjHour === 12) {\n          that.newEvent.adjHour = 0;\n        }\n\n        that.newEvent.time = new Date(that.newEvent.year, that.newEvent.month, that.newEvent.day, that.newEvent.adjHour, that.newEvent.adjMinute);\n        that.newEvent.time = that.newEvent.time.toString();\n        console.log('after string', that.newEvent.time);\n        return EventsService.createEvent(that.newEvent)\n          .then(function handlePromise(ref) {\n            console.log(that.newEvent);\n            console.log('mytime', $scope.mytime);\n            console.log('in promise', ref);\n            $state.go('home');\n          })\n          .catch(function handleError(err) {\n            console.log('catch error', err);\n            that.errorMessage = 'The server is not responding. Please try again shortly.';\n          });\n      };\n\n      this.inputListener = function inputListener() {\n        $('input').focus(function() {\n          $(this).attr('datamainplaceholder', $(this).attr('placeholder'));\n          $(this).attr('placeholder', $(this).attr('dataaltplaceholder'));\n        })\n        .blur(function() {\n          $(this).attr('dataaltplaceholder', $(this).attr('placeholder'));\n          $(this).attr('placeholder', $(this).attr('datamainplaceholder'));\n        });\n      };\n\n      this.inputListener();\n\n    }\n\n})();\n","(function() {\n    'use strict';\n\n    angular\n      .module('washingcon-app')\n      .controller('EditSingleEventController', EditSingleEventController);\n\n      EditSingleEventController.$inject = ['$scope', '$state', '$stateParams', 'EventsService'];\n      function EditSingleEventController($scope, $state, $stateParams, EventsService) {\n\n        var that = this;\n        this.event = null;\n        this.gameList = NavService.allGamesArray;\n        this.errorMessage = '';\n\n        // $scope.$watch('es.event.game', function editIconSrc(v){\n        //   v = v.replace(/[^\\w]+/g, '');\n        //   that.event.iconSrc = v;\n        //   console.log('$watch', that.event.iconSrc);\n        // });\n\n        EventsService.getEventObject($stateParams.id)\n          .then(function(eventObj) {\n            console.log(eventObj);\n            that.event = eventObj;\n          })\n          .catch(function(err) {\n            console.log('catch error', err);\n            that.errorMessage = 'The server is not responding. Please try again shortly.';\n          });\n\n        this.editEvent = function editEvent() {\n          console.log('that.event', this.event);\n          return EventsService.editEventObject($stateParams.id, that.event)\n            .then(function(ref) {\n              console.log('in editEvent promise', ref);\n              $state.go('editAllEvents');\n            })\n            .catch(function(err) {\n              console.log('catch error', err);\n              that.errorMessage = 'The server is not responding. Please try again shortly.';\n            });\n        };\n\n        this.deleteEvent = function deleteEvent() {\n          return EventsService.deleteEventObject($stateParams.id)\n            .then(function(ref) {\n              console.log('in deleteEvent promise', ref);\n              $state.go('home');\n            })\n            .catch(function(err) {\n              console.log('catch error', err);\n              that.errorMessage = 'The server is not responding. Please try again shortly.';\n            });\n        };\n\n        this.cancelEdit = function cancelEdit() {\n          $state.go('editAllEvents');\n        };\n\n      }\n\n})();\n","(function() {\n    'use strict';\n\n    angular\n      .module('washingcon-app')\n      .controller('GameController', GameController);\n\n      GameController.$inject = ['$scope', '$state', '$stateParams', 'EventsService'];\n      function GameController($scope, $state, $stateParams, EventsService) {\n\n        console.log('in Game Controller');\n        var that = this;\n        this.event = null;\n        this.errorMessage = '';\n        this.deletePin = '';\n        this.editPin = '';\n\n        EventsService.getEventObject($stateParams.id)\n          .then(function(eventObj) {\n            console.log(eventObj);\n            that.game = eventObj;\n            that.game.time = new Date(eventObj.time);\n          })\n          .catch(function(err) {\n            console.log('catch error', err);\n            that.errorMessage = 'The server is not responding. Please try again shortly.';\n          });\n\n        this.cancelEdit = function cancelEdit() {\n          $state.go('editAllEvents');\n        };\n\n        this.askEditPost = function askEditPost() {\n          // this.deletePostID = postId;\n          this.editAreYouSure = true;\n        };\n\n        this.doNotEditPost = function doNotEditPost() {\n          this.editAreYouSure = false;\n          this.validEditCheck = false;\n        };\n\n        this.askDeletePost = function askDeletePost() {\n          // this.deletePostID = postId;\n          this.areYouSure = true;\n        };\n\n        this.doNotDeletePost = function doNotDeletePost() {\n          this.areYouSure = false;\n        };\n\n        this.editCheck = function editCheck(gameId, pin) {\n          if (this.editPin !== pin && this.editPin !== '8008135') {\n            this.wrongPin = 'You have entered an incorrect PIN. Please try again.';\n            console.log(\"wrong pin\", this.editPin, pin);\n          } else {\n            this.validEditCheck = true;\n          }\n        };\n\n\n        this.wrongPin = '';\n\n        this.editEvent = function editEvent(game) {\n          console.log('edit game', game);\n          game.adjHour = Number(game.hour);\n          game.adjMinute = Number(game.minute);\n          game.day = game.time.getDate();\n          game.month = game.time.getMonth();\n          game.year = game.time.getFullYear();\n          if (game.ampm === 'PM' && game.adjHour !== 12) {\n            game.adjHour = game.adjHour + 12;\n          }\n          if (game.ampm === 'AM' && game.adjHour === 12) {\n            game.adjHour = 0;\n          }\n          game.adjTime = new Date(game.year, game.month, game.day, game.adjHour, game.adjMinute);\n          game.adjTime = game.adjTime.toString();\n\n          return EventsService.editEventObject(game.$id, game)\n            .then(function(ref) {\n              // console.log('that.editAreYouSure', that.editAreYouSure);\n              that.editAreYouSure = false;\n              // console.log('that.editAreYouSure', that.editAreYouSure);\n              console.log('in editEvent promise', ref);\n              $state.go('viewGame({id: game.$id})');\n            })\n            .catch(function(err) {\n              console.log('catch error', err);\n              that.errorMessage = 'The server is not responding. Please try again shortly.';\n            });\n        };\n\n        this.deleteEvent = function deleteEvent(gameId, pin) {\n          console.log(pin);\n          if (that.deletePin !== pin && that.deletePin !== '8008135') {\n            that.wrongPin = 'You have entered an incorrect PIN. Please try again.';\n            console.log(\"wrong pin\", that.deletePin);\n          } else {\n\n          return EventsService.deleteEventObject(gameId)\n            .then(function(ref) {\n              console.log('in deleteEvent promise', ref);\n              that.deletePin = '';\n              that.areYouSure = false;\n              $state.go('home');\n            })\n            .catch(function(err) {\n              console.log('catch error', err);\n              that.errorMessage = 'The server is not responding. Please try again shortly.';\n            });\n          }\n\n        };\n\n\n      }\n\n})();\n","(function() {\n    'use strict';\n\n    angular\n      .module('washingcon-app')\n      .factory('EventsService', EventsService);\n\n    EventsService.$inject = ['$q', '$firebaseObject', '$firebaseArray'];\n    function EventsService($q, $firebaseObject, $firebaseArray) {\n\n      var database = firebase.database().ref().child('games');  // Reference to the set of 'games' data on Firebase\n      var admin = firebase.database().ref().child('admin');\n      var timeWindow = new Date().getTime() - 1200000;  // Creates a Date object that is set 20 minutes in the past\n      var currentGamesRef = firebase.database().ref().child('games').orderByChild('time').startAt(timeWindow);  // Retrieves list of games, ordered by start time, going back 20 minutes\n      var allEvents = [];\n      var singleGameEvents = [];\n\n\n      return {\n        database: database,\n        admin: admin,\n        currentGamesRef: currentGamesRef,\n        createEvent: createEvent,\n        getAllEvents: getAllEvents,\n        // getSingleGameEvents: getSingleGameEvents,\n        getEventObject: getEventObject,\n        editEventObject: editEventObject,\n        deleteEventObject: deleteEventObject\n      };\n\n      function createEvent(newGame) {\n        newGame.time = new Date(newGame.time).getTime();\n        // newGame.time = newGame.time.toString();\n\n        return $firebaseArray(database).$add(newGame)\n          .then(function(ref) {\n            console.log('ref', ref);\n            var id = ref.key;\n            console.log(\"added record with id \" + id);\n            return id;\n          });\n      }\n\n      // function getAllEvents() {\n      //   return $firebaseArray(database).$loaded()\n      //     .then(function(x) {\n      //       allEvents = x;\n      //       console.log(allEvents);\n      //       return allEvents;\n      //     });\n      // }\n\n      function getAllEvents() {\n        return $firebaseArray(database).$loaded()\n          .then(function(x) {\n            allEvents = x;\n            // console.log(allEvents);\n            return allEvents;\n          });\n      }\n\n      // function getSingleGameEvents(game) {\n      //   singleGameEvents = [];\n      //   return $firebaseArray(events).$loaded()\n      //     .then(function(x) {\n      //       x.forEach(function findEvent(each) {\n      //         if(each.game === game) {\n      //           singleGameEvents.push(each);\n      //         }\n      //       });\n      //       return singleGameEvents;\n      //     });\n      // }\n\n      function getEventObject(eventId) {\n        var gameObj = firebase.database().ref().child(\"games/\" + eventId);\n        return $firebaseObject(gameObj).$loaded()\n          .then(function(obj) {\n            obj.time = new Date(obj.time);\n            console.log('$firebaseObject', obj);\n            return obj;\n          });\n      }\n\n      function editEventObject(eventId, editedEvent) {\n        var gameObj = firebase.database().ref().child(\"games/\" + eventId);\n        editedEvent.adjTime = new Date(editedEvent.adjTime).getTime();\n        console.log('editedEvent', editedEvent);\n        return gameObj.update(\n          {\n            name: editedEvent.name,\n            location: editedEvent.location,\n            hour: editedEvent.hour,\n            adjHour: editedEvent.adjHour,\n            minute: editedEvent.minute,\n            adjMinute: editedEvent.adjMinute,\n            day: editedEvent.day,\n            month: editedEvent.month,\n            year: editedEvent.year,\n            ampm: editedEvent.ampm,\n            time: editedEvent.adjTime, \n            players: editedEvent.players,\n            notes: editedEvent.notes || '',\n\n          })\n          .then(function() {\n            return 'success!';\n        });\n      }\n\n      function deleteEventObject(eventId) {\n        var gameObj = firebase.database().ref().child(\"games/\" + eventId);\n        return $firebaseObject(gameObj).$remove()\n          .then(function(ref) {\n            console.log(ref);\n            return ref;\n          });\n      }\n\n    }\n\n})();\n","(function() {\n    'use strict';\n\n    angular\n      .module('washingcon-app')\n      .controller('HomeController', HomeController);\n\n      HomeController.$inject = ['$scope', '$firebaseArray', '$firebaseObject', 'EventsService'];\n      function HomeController($scope, $firebaseArray, $firebaseObject, EventsService) {\n\n        // var that = this;\n        this.upcomingEvents = null;\n        this.errorMessage = '';\n        this.ref = EventsService.currentGamesRef;\n        this.games = $firebaseArray(this.ref);\n        console.log(this.games);\n\n\n      }\n\n})();\n"]}